<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/integration"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:int="http://www.springframework.org/schema/integration"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
			   https://www.springframework.org/schema/beans/spring-beans.xsd
			   http://www.springframework.org/schema/integration
			   https://www.springframework.org/schema/integration/spring-integration.xsd" >

    <!-- Configure Spring Integration Tech Support message flow here -->

    <!-- DirectChannel example (Subscribable) -->
    <int:channel id="rawJsonInputChannel" />

    <!-- Transformer example (JSON to Object) -->
    <int:json-to-object-transformer input-channel="rawJsonInputChannel"
                                    output-channel="statusMonitorChannel"
                                    type="com.lil.springintegration.util.AppSupportStatus" />

    <!-- PublishSubscribeChannel example (Subscribable) -->
    <int:publish-subscribe-channel id="statusMonitorChannel" />

    <!-- Filter example -->
    <int:filter input-channel="statusMonitorChannel"
                output-channel="updateNotificationQueueChannel"
                ref="selector" />

    <beans:bean id="selector" class="com.lil.springintegration.service.StatusMonitorService.ServiceMessageFilter" />

    <!-- QueueChannel example (Pollable) -->
    <int:channel id="updateNotificationQueueChannel">
        <int:queue capacity="5" />
    </int:channel>

</beans:beans>

