<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/integration"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:int="http://www.springframework.org/schema/integration"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
			   https://www.springframework.org/schema/beans/spring-beans.xsd
			   http://www.springframework.org/schema/integration
			   https://www.springframework.org/schema/integration/spring-integration.xsd" >

    <!-- Configure Spring Integration Tech Support message flow here -->

    <int:publish-subscribe-channel id="techSupportChannel" />

    <!-- https://www.waitingforcode.com/spring-integration/queue-channel/read -->

    <int:channel id="queueChannel">
        <int:queue capacity="5" />
    </int:channel>


    <!-- send-timeout parameter is mandatory here. Otherwise, service activator will block whole application when QueueChannel's queue
          is full -->
    <int:service-activator input-channel="techSupportChannel" ref="productActivator" requires-reply="true"
                           output-channel="queueChannel" method="handleBookingProduct" send-timeout="1000" />



</beans:beans>

